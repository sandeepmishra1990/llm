M14 Release Notes
Milestone 14
Released on 9-November-2022.

For a complete overview of the issues and merge requests, please refer here.

For detailed services that are included in this release, please refer to M14 tagging notes.

In keeping with our policy of releasing new capabilities early and often for feedback, we are pleased to introduce several new experimental platform capabilities in this milestone release. These are only available in specific cloud service providers currently as part of this milestone release, future milestone release will include more CSP support. See details below.

Policy service (Experimental) - AWS, Azure
Reservoir DDMS (Experimental) - Azure
External Data Services (Experimental) - Azure
Geospatial Consumption Zone (Experimental) - IBM
Manifest ingestion by reference (Experimental) - GCP, IBM
Table of Content
Milestone 14
Table of Content
New Features
Data Definition
Core and Helper Services
DDMS
External Data Services (EDS)
GCZ (Geospatial Consumption Zone)
Bug Fixes
Core and Helper Services
Ingestion services
DDMS
❗ Breaking Changes
Deprecation Notice
Known Issues/Gaps
Supporting Information
OSDU Community utilities
New Features
Bug Fixes
New Features
Data Definition
No in-place schema changes are required in M14 (no M13 schema resources were changes). Refer here for full changes "OSDU schemas" and full changes "OSDU reference-values"

New Entity Types
WellboreOpening and IsolatedInterval are added to the M13 PerforationInterval and PerforationJob. WellboreOpening can relate to experimental Reservoir and ReservoirSegment. A worked example with a narrative has been provided in the context of "Well Completions"
Reservoir and ReservoirSegment have been added as experimental placeholders with version 0.0.0. These entities are currently under creation. No mass-ingestion should be performed because the schema will update with breaking changes.
Well Execution added WellActivity. It integrates with updated ActivityPlan and OperationsReport.
Updated Entity Types
Well Planning and Execution (with updated worked examples)
ActivityPlan:1.1.0 with migration instructions.
OperationsReport:1.1.0 with migration instructions.
Activity, now with life-cycle states and ActivityStatus
New AbstractActivityState, which is included by
AbstractProjectActivity:1.1.0, and
AbstractWPCActivity:1.1.0
and consumed by Activity:1.1.0 with migration information.
Rock Sample Analysis with updated worked examples:
RockSampleAnalysis:1.1.0 now includes support for Grain Size Analysis, in addition to the M13 RoutineCoreAnalysis.
External Data Source Support
ConnectedSourceRegistryEntry:1.1.0 with migration information.
ConnectedSourceDataJob:1.1.0, no migration required.
Seismic Domain
SeismicTraceData:1.3.0, now with reference data relationships for SeismicPhase and SeismicPolarity; migration information.
Patched Entity Types
PPDM synchronizations for
SeismicProcessingStageType:1.0.1, migration information for content upgrade.
VerticalMeasurementType:1.0.2 (no content change).
WellboreMarkerSet:1.2.1 got a missing description added. No migration required. Warning: By accident, the 1.2.1 version refers to AbstractWorkProductComponent:1.1.0, which is correctly identified by the Schema service bootstrapping as breaking change. To fix this, please use this patched version of WellboreMarkerSet:1.2.1.
Wellbore:1.1.1 had a duplicate property added in version 1.1.0 (by mistake), which is now deprecated.
Core and Helper Services
Entitlement and Obligations
AWS Azure- Entitlement and Obligation with Policy Service and Open Policy Agent (OPA) implemented. Policies are deployed by default and can be updated via the Policy Service. Storage and Search services now use Policy Service and OPA by default - see issues 49, 45, 46.
AdminCLI - Entitlement and Obligation introduced and AdminCLI that makes managing and testing policies dramatically easier. It also provides support for other services.
Indexer
Geoshape decimation. See MR !387
Indexing virtual properties. See MR !357
Lib
Updated type of dataHash to save hash of multiple fields. See MR !173
Added extensionProperties to legal tag properties. See MR !172
Add rc-versions if it is a merge into master. See MR !71
Search
Added OPA Translation integration. See MR !290
DDMS
Seismic DDMS
Added list endpoint as post, see !436.
Performance improvement on caching solution, see !453.
Update impersonation token to track original user, see !525.
Wellbore DDMS
Some documentation and tutorials reviewed and added.
Performance enhancement on reading WellLog record, see !599.
Performance enhancement on describe bulk data on big arrays, see !605.
Preview of read bulk data improvement (disabled by default). !621.
Support of Wellbore:1.1.1 and WellboreMarkerSet:1.2.1, see issue #52
Reservoir DDMS
Provide docker image for SSH-compatible ETP client for external RESQML file ingestion in Reservoir DDMS and RESQML file generation from Reservoir DDMS. See Container Registry
External Data Services (EDS)
M14 release summary
Email notification service will send out a summary of all the jobs based on Failed records on the dates configured in ConnectedSourceRegistryEntry
To Fetch Failed records of the previous airflow runs
Reference value mapping functionality will take care of any reference value mismatch when ingesting data into the Data Operator system from the Provider
Added ingested records summary and count, failed records summary and count in airflow XCOM summary
M14 Schema changes
Modified "ClientID" into "ClientIDKeyName"
Added "EmailTriggerFreqency" - This will hold email trigger frequency
"ReferenceValueMappings" as an object - This will hold the respective provider and operator reference schema mapping
"FailedRecords" - This will hold the previously failed records, and failed records will be processed during the latest run
List of issues that can again be tested in M14 for closure
EDS job erroneously changes the kind name when transferring record
EDS Katalyst - error while fetching data from client
Unable to fetch & ingest WPC from external data source
GCZ (Geospatial Consumption Zone)
Transformer Enhancements:
Implemented batch loading options loadInBatch and batchSize for Transformer to significantly reduce memory overhead when ingesting large datasets. The batch size is configurable and can be customized higher or lower to scale for different environments.
Implemented Schema Service fetching in Transformer to determine field types of record attributes with greater authority
Config changes
authorizeUrl removed from configurable options
dataPartitionId added as configurable option
New log file geoJsonSummaryLog generated to track records that failed to ingest due to invalid geometries
Provider Bug Fixes:
Prevent crash when nonexistent feature layer is requested from Provider
Prevent error when returnCountOnly and returnExtentOnly request parameters are simultaneously true in a request sent to a FeatureLayer generated by the Provider
Prevent returnExtentOnly requests from erroneously returning null geometry
General improvements to error handling
Wiki updates
Bug Fixes
Core and Helper Services
Lib
correction in case of empty dataset service payload for manifest by reference. See MR !79
Upgrade Gson. See MR !205
[CRS normalization] Ingested manifest with 2D CRS Persistable reference cannot be found by Search (GONRG-5581). See MR !175
Add no-authorization header request capability. See MR !75
Upgrade dependencies to fix vulnerability and migrating from springfox to open-api. See MR !222
Upgrade dependencies to fix vulnerability and migrating from springfox to open-api. See MR !190
Dataset dms client update : add a missing function for DMS client (missing new enpoint). See MR !74
Fix typo in setup.py. See MR !73
GONRG-3815: Remove urls from base client. See MR !67
File
added changes for rookceph. See MR !356
Update swagger documentation for end point "downloadURL" and end point - File uploadURL. See MR !347
Fix WhiteSource vulnerability issues. See MR !327
Partition
Upgrade Gson. See MR !274
Fixed security issues (GONRG-5608). See MR !260
Notification
Upgrade Gson. See MR !267
Dataset
Upgrade Gson. See MR !255
Upgrade dependencies to fix vulnerabilities and migrate from springfox to openapi. See MR !250
Update DatasetFilter. See MR !247
Storage
[CRS normalization] Coordinates in the original CRS system are not preserved in the index (GONRG-5581). See MR !514
fix CrsConversionService potential class cast issues. See MR !513
batch legaltag to size of 25 during ingestion validation, which is the current limit of Legal API. See MR !511
Enabling OPA for AWS and refactor test to wait until OPA cache invalidates. See MR !499
Fix permissions for soft delete. See MR !483
Fix data inconsistency issue between metadata storage and blob storage. See MR !451
Register
Upgrade dependencies to fix vulnerabilities and migrate from springfox to openapi. See MR !243
remove auth header from hmac challenge request. See MR !242
Search
Search Service API sending out 500 error code for IllegalArgumentException type. See MR !327
upgrade jackson-databind. See MR !322
Schema
Fix white source vulnerabilities. See MR !372
Ingestion services
Manifest ingestion by reference
Fix error while DAG run. See issue #108
DDMS
Seismic DDMS
General bug fixes & stability improvement. Refer to service, sdapi, and sdutil for detailed notes
oVDS
M14 has been updated with the 3.0.4 image
Wellbore DDMS
Error response exhaustive list declared on openapi spec. see !509.
Reservoir DDMS
Fixes for deployment issues
Fixes for multi-partition support, see MR !44
❗ Breaking Changes
WellboreMarkerSet:1.2.1
The original M14 v0.17.0 version contains by accident a breaking change, which is fixed in this patch for WellboreMarkerSet:1.2.1.
Wellbore DDMS
Due to performance degradation, auto computation of the bulk statistic on session commit and post bulk has been disabled. Issue #50. Bulk statistic feature is still there but computation will be on-demand only.
v2 search & V3 fast search APIs fully removed. Deprecated respectively in M9 & M12. issue #48.
Deprecation Notice
DDMS
Seismic DDMS
Azure database model changes. Refer here for more info.
Known Issues/Gaps
Refer here for a list of known pre-shipping testing issues.
Supporting Information
Preship Testing team's test result summary
Preship Testing team's test result folder . This contains documented steps for using respective features.
QA (aka "Platform Validation") team's folders of Postman Collections
Open Test data - good collection of load manifest (JSON) files matching sample data from TNO, Volve. Here
Data loading guide (quick start). Here
OSDU Community utilities
The OSDU Community provides a collection of tools and helper utilities to support the OSDU platform. These utilities are not governed by the OSDU Project Management Committee (PMC) and therefore OSDU cannot guarantee service level agreements (SLAs), security, or other aspects related to these components. Use of these utilities is at your own risk.

New Features
OSDU Admin Cli
The Admin CLI is an easy to use full featured CLI.
https://community.opengroup.org/osdu/ui/admincli
Bug Fixes
Wellbore DDMS Data loader
Fix NumberOfColumns requirement for consistency check. See MR !44
Fix module import error. See MR !48
Fix OsduClient commands. See MR !49
