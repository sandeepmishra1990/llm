M18 Release Notes
Milestone M18
Released on 27-June-2023

For a complete overview of the issues and merge requests, please refer here.

For detailed services that are included in this release, please refer to M18 tagging notes.

❗ Important Note
Sandbox / Incubator
In keeping with our policy of releasing new capabilities early and often for feedback, we are pleased to introduce several new Sandbox / Incubator platform capabilities in this milestone release. These are currently only available in specific cloud service providers with limited scopes and functionalities, future milestone releases will include more CSP support. Please refer to the details below.

Policy service - AWS, Azure, GC. Performance issue is observed during preshipping test - see section below for more information.
GC Policy service is OFF by default.
AWS Policy service is ON by default.
Azure Policy service is ON by default.
Reservoir DDMS - Azure
External Data Services - Azure, GC, AWS
Geospatial Consumption Zone - Azure
Manifest ingestion by reference - GC, AWS, Azure
https://osdu.aha.io/bookmarks/custom_pivots/7233428034013202630/7241860559301394382

For the evaluation metrics - please refer to the guide here

CSP Support
M18 has not been validated in IBM environment.
Table of Content
Milestone M18
❗ Important Note
Sandbox / Incubator
CSP Support
Table of Content
New Features
Data Definition
Core and Helper Services
Ingestion services
DDMS
External Data Services (EDS)
GCZ (Geospatial Consumption Zone)
Dependency Changes
Doc Changes
Minor Changes
Bug Fixes
Core and Helper Services
Ingestion services
DDMS
Enhancements
Core and Helper Services
Ingestion services
Known Issues/Gaps
Core services
Ingestion services
External Data Services (EDS)
Supporting Information
New Features
Data Definition
Seismic Domain
New schemas for statistical artefacts associated to seismic data:
osdu:wks:dataset--File.SeismicHistogram:1.0.0 as dedicated dataset (ArtefactRole:ContentMetadata) for histograms, which received their own content schema due to the lack of an industry standard:
osdu:wks:content--SeismicHistogram:1.0.0 - the content schema.
Separate datasets for legacy tape formats SEGA and SEGB:
osdu:wks:dataset--FileCollection.SEGA:1.0.0
osdu:wks:dataset--FileCollection.SEGB:1.0.0
Activity
Activity parameter lacked a specification for Boolean values. This has been added to osdu:wks:AbstractActivityParameter:1.1.0, which is now included by
osdu:wks:AbstractWPCActivity:1.2.0, and
osdu:wks:AbstractProjectActivity:1.2.0
The osdu:wks:work-product-component--Activity:1.3.0 refers now to the latest AbstractProjectActivity. (Detailed changes for Activity)
master-data entities referring to AbstractProjectActivity are not updated in M18; these changes will be combined with other updates.
Well Delivery
New osdu:wks:work-product-component--TubularExternalComponent:1.0.0 supporting external components, also known as jewellery. The new type refers to three new reference value lists, see below.
Updated osdu:wks:work-product-component--TubularAssembly:1.2.0 with an array of historical TubularAssemblyStates in addition to the current TubularAssemblyStatus.
Correction of osdu:wks:master-data--OperationsReport:1.3.0, see migration information for details.
Environmental Monitoring
New work-product-component osdu:wks:work-product-component--SoilGasMonitoring:1.0.0 a type of environmental monitoring. Environment monitoring consists of tools, techniques and processes designed to observe an environment and characterise its quality for the purpose of accurately quantifying the impact an activity has on an environment. Other environmental monitoring types or techniques include air, water, contamination and erosion monitoring. And data is typically comprised of baseline and subsequent temporal data sets. The new type refers to three new reference value lists, see below.
Reference Data
PPDM takes over governance for the following reference value lists by adjusting the list description and the correction/augmentation of values:
osdu:wks:reference-data--GrainDensityMeasurementType:1.0.1, detailed list of changes here.
osdu:wks:reference-data--PerforationGunPhasingType:1.0.1, detailed list of changes here.
osdu:wks:reference-data--WellboreReason:1.0.1, the previous version was still under 'Authoring', which allows the removal of values not endorsed by PPDM. Detailed list of changes here.
Update: osdu:wks:reference-data--QuantitativeAccuracyBand:1.0.0 with changes to codes documented in migration instructions.
OSDU reference value list augmentations:
osdu:wks:reference-data--EncodingFormatType:1.0.0 with new values for datasets previously not explicitly supported.
osdu:wks:reference-data--ParameterKind:1.0.0 adding support for Boolean parameter type.
Supporting index extension configurations (ADR #81):
osdu:wks:reference-data--IndexPropertyPathConfiguration.1.0.0 and worked examples. No content is currently shipped. Content, i.e. de-normalizations, will be defined by the consumer community.
External Data Sources
Support for master data instance mapping by defining matching rules. This is facilitated by the new, LOCAL reference value list osdu:wks:reference-data--ParentMatchingRuleSets:1.0.0.
Description changes to osdu:wks:reference-data--ValueChainStatusType:1.0.1 schema and values.
Environmental Monitoring
introduces the following new reference value lists to support SoilGasMonitoring:
osdu:wks:reference-data--SoilGasAnalysisType:1.0.0 Analytical method used by laboratory to complete soil gas analysis testing.
osdu:wks:reference-data--SoilGasApplication:1.0.0 The soil gas application or situational setting that the data is being used for or acquired within. Examples include carbon capture & storage, depleted oil or gas field, water reservoir, producing oil or gas, fracking, etc.
osdu:wks:reference-data--SoilGasSamplingMethod:1.0.0 Methodology detailing how the soil gas sample was acquired.
Reference lists for TubularExternalComponent
osdu:wks:reference-data--TubularExtCompAttachMechanism:1.0.0 List of methods used to attach external components to a tubular assembly.
osdu:wks:reference-data--TubularExtCompAttachPattern:1.0.0 List of external component placement patterns which describe frequency of the equipment being installed onto the tubular assembly.
osdu:wks:reference-data--TubularExtCompType:1.0.0 List of tubular assembly external component (equipment) types for drilling, casing/liner and completion assemblies.
New dataset Entities (Energistics, HDF)
osdu:wks:dataset--File.EML:1.0.0
osdu:wks:dataset--File.HDF5:1.0.0
osdu:wks:dataset--File.PRODML:1.0.0
osdu:wks:dataset--FileCollection.EPC:1.0.0
Additional reference values for EncodingFormatType to support application/json, application/x-hdf5 and application/x-epc+zip
Core and Helper Services
Indexer
Provide an endpoint to create aliases for all existing indices that do not have aliases. See MR !496 by (@zhibinmai)
Feature Flag Index extended properties defined in property configurations. See MR !465 by (@zhibinmai)
Schema
OSDU Data Definition M18 deliverables: 29 new schemas/schema versions with updated load_sequence.. See MR !485 by (@gehrmann)
Ingestion services
Ingestion Workflow
Pass 'user id' as part of Airflow config. See MR !407 by (@thulasi_dass)
DDMS
Reservoir DDMS:
Server : two-steps authentications for token renewal
Client : OSDU identifier in Manifest generation, improving link with seismic domain
Seismic DDMS:
An API that compute and retrieve the size of a dataset and the date of when the size was computed
(AWS) Using keda scaling
(Azure) dataset exist getMulti
Use x-user-id in createdby and admin field OSDU
(SDAPI) Add custom retry at SDManager level
(SDUTIL) Implemented checksum upload and validation for cp/stat operations
Wellbore DDMS
Support of work-product-component--WellboreTrajectory:1.2.0 & work-product-component--WellLog:1.3.0 added in M17.
Schema validation mechanism reviewed, WDMS now directly uses JSON schemas to validate records instead of generated object models in order to reduce cost of maintenance and update effort. No breaking change expected.
External Data Services (EDS)
Handing EDS Incremental Fetch Scenario where multiple data records at the provider end have the same creative or modify time Issue 266
Link ExternalReferenceValueMappings to the CSRE Issue 269
EDS -Display Osdu_ingest run ID in eds_ingest Xcom Summary Issue 24
Deploying EDS M18 Version on AWS (transitioning from the current AWS environment running EDS M16).
GCZ (Geospatial Consumption Zone)
Programmatic Trajectory Completion
Also includes new geometryLocation kind configuration parameter
Seismic 2D Live Trace
Refactor for OSDU CI/CD Support
Minor restructure introduced on May 1. All docs have up-to-date instructions.
Enables support for OSDU-provisioned Pipelines for Building/Testing/Scanning the codebase
Related: Add fossa to pipeline
Update Transformer code to use configurable Ignite Service Token
Optional configuration to specify location of Ignite Service Token when using K8S Profile
Dependency Changes
Rollback GridGain Version from 8.8.27 to 8.8.13
To address conflict observed in Kubernetes environments
Upgrade from wicket to wellknown for wkt-geojson conversions
update core-lib-gc artifact id
Doc Changes
Added requirements document for each existing, supported data type
See the Data Types section in our doc Table of Contents
Minor Changes
Relocate default config files to the core subdirectories
Bug Fixes
Core and Helper Services
Search
Search not handling Policy error responses gracefully (GONRG-7105). See MR !505 by (@Stanislav_Riabokon)
Add space flexibility for nested queries. See MR !499 by (@sakethsomaraju)
Fix bug on creating alias for kind with major version. See MR !490 by (@zhibinmai)
Indexer
Insert token prefix 'Bearer ' when it is missed. See MR !547 by (@zhibinmai)
Optimized logging for warning message. See MR !544 by (@LPereira14)
Retry upsert when bulk response is 400 and matches error type. See MR !541 by (@msavchuk)
Storage
Add 'Frame of Reference' header to 'records:batch'. See MR !701 by (@thulasi_dass)
Notification
Fix global exception API response. See MR !384 by (@nthakur)
Register
Fixed Inconsistent entityType regex patterns issue. See MR !345 by (@Siarhei_Khaletski)
Secret
Encode secret name input when unknown Secret Manager errors is raised. See MR !89 by (@cailletg)
Ingestion services
Ingestion Workflow
Fix: initialize executionContext. See MR !444 by (@mmarabe)
osdu-airflow-lib
Fix: default value of userId should be None. See MR !64 by (@Yan_Sushchynski)
osdu-ingestion-lib
Fix: update Python version in tests in .gitlab-ci.yml. See MR !50 by (@Yan_Sushchynski)
Fix replace authority with data-partition-id. See MR !49 by (@Yan_Sushchynski)
DDMS
Reservoir DDMS- Server Fixes and enhancements
Add logging details on ETP connection failure
Improve docker image tagging
Fix response of Put data Objects
Improve transaction safety
Restrict to one connection per session for all Dataspaces
Seismic DDMS
Fixed size endpoint
Azure credentials from manage identities
Fixed cache key
Use Azure Blob Storage SDK RetryPolicy only to ensure exponential backoff retries
Enabled the refreshing of token in case of expired token instead of throwing exception
Dk/az refresh logic
Create version file in build pipeline
General bug fixes & stability improvement. Refer to service, sdapi, and sdutil for detailed notes
Enhancements
Core and Helper Services
Indexer
OpenAPI 3.0 Documentation using springdoc. See MR !524 by (@thulasi_dass)
File
Make default TTL expiryTime changes for downloadURL and uploadURL API's. See MR !462 by (@thulasi_dass)
Notification
OpenAPI 3.0 Documentation using springdoc. See MR !368 by (@thulasi_dass)
Ingestion services
osdu-airflow-lib
Enable User context ingestion. See MR !61 by (@deepapathak)
osdu-ingestion-lib
Enable user context ingestion. See MR !53 by (@deepapathak)
Known Issues/Gaps
Refer here for a list of known pre-shipping testing issues.

Core services
Policy service
Performance degradation is observed with policy service turned on. See issue here
File service
Computed checksum value does not match the expected value. See issue here
Storage service
Patch API fails when used with Policy service enabled. See issue here
Ingestion services
WITSML Parser
Data type "Trajectory" is failing. See issue here
Wellbore DDMS data loader (LAS file)
Fails when testing in GC environment. See issue here
External Data Services (EDS)
EDS DMS (retrieve bulk data file) is not implemented in GC platform. See issue here
Supporting Information
Data Loading Guide. See here
Preship team's test results (documented steps). See here
Postman collections from QA aka "Platform Validation" team. See here
JSON payload and related information for loading sample data from TNO, Volve, NOPIMS. See here